<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;438;500&display=swap" rel="stylesheet">
</head>

<body>
    <h1>Rock Paper Scissors</h1>
    <hr>
    <div class="buttons">
        <button class="button" id="Rock"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 86.04 93" class="svg">
                <defs>
                    <style>
                        .cls-1 {
                            fill: #CFC0BD;
                        }
                    </style>
                </defs>
                <title>Rock</title>
                <g id="Layer_2" data-name="Layer 2">
                    <g id="Layer_1-2" data-name="Layer 1">
                        <path class="cls-1 svg"
                            d="M65.26,28.92V9.61A9.61,9.61,0,0,0,46,9.61V28.38H63A5.06,5.06,0,0,1,65.26,28.92Z" />
                        <path class="cls-1 svg"
                            d="M20.79,28.38V8.88a8,8,0,1,0-16.06,0v24a20.31,20.31,0,0,1,12.8-4.53Z" />
                        <path class="cls-1 svg"
                            d="M77.1,48.46a11.85,11.85,0,0,1-10.24-5.92A17.93,17.93,0,0,1,50.24,53.79h-12a19.76,19.76,0,0,1,9.47,16.85v5.42a1.45,1.45,0,0,1-2.89,0V70.64A16.88,16.88,0,0,0,27.94,53.79h-.26a1.44,1.44,0,0,1-1.44-1.45h0a1.43,1.43,0,0,1,1.44-1.44H50.24a15,15,0,0,0,15-15V33.55A2.26,2.26,0,0,0,63,31.28H17.53A17.48,17.48,0,0,0,4.18,37.47c-.25.28-.48.58-.71.87l-.26.38c-.22.31-.44.63-.63,1L2.39,40c-.21.35-.4.7-.58,1.06a1.51,1.51,0,0,1-.09.18c-.2.42-.38.85-.55,1.28l-.06.17C.94,43.12.8,43.57.67,44l-.05.17c-.12.45-.23.91-.31,1.38a1.16,1.16,0,0,0,0,.18c-.08.47-.15.94-.19,1.41a1,1,0,0,0,0,.17c0,.49-.07,1-.07,1.48,0,1.19.06,2.37.15,3.53A44.24,44.24,0,0,0,44.19,93h5.26A36.63,36.63,0,0,0,86,56.41v-12A11.82,11.82,0,0,1,77.1,48.46Z" />
                        <path class="cls-1 svg" d="M43.15,9.73a9.74,9.74,0,0,0-19.47,0V28.38H43.15Z" />
                        <path class="cls-1 svg"
                            d="M77.1,14.09A9,9,0,0,0,68.16,23v13.6a8.94,8.94,0,0,0,17.88,0V23A9,9,0,0,0,77.1,14.09Z" />
                    </g>
                </g>
            </svg></button>
        <button class="button" id="Paper"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 94" class="svg">
                <defs>
                    <style>
                        .cls-2 {
                            fill: #B8B8AA;
                        }
                    </style>
                </defs>
                <title>Paper</title>
                <g id="Layer_2" data-name="Layer 2">
                    <g id="Layer_1-2" data-name="Layer 1">
                        <path class="cls-2 svg"
                            d="M71.25,12.76a5,5,0,0,0-5,5V42A1.12,1.12,0,1,1,64,42V5.93A5.94,5.94,0,0,0,58,0a5.84,5.84,0,0,0-4.28,1.76A6,6,0,0,0,52.1,6V42a1.12,1.12,0,0,1-2.24,0V6.4A6.41,6.41,0,0,0,43.46,0a6.56,6.56,0,0,0-6.4,6.8V42a1.12,1.12,0,0,1-2.24,0V13.17a5.94,5.94,0,0,0-5.93-5.93A6.07,6.07,0,0,0,23,13.55V57.29H36.13a18.07,18.07,0,0,1,13.68,6.26A1.12,1.12,0,0,1,48.11,65a15.84,15.84,0,0,0-12-5.48H21.85l-.15,0h-.06a1.43,1.43,0,0,1-.27-.09l-.06,0a1,1,0,0,1-.2-.15l0,0L15.53,54a10.54,10.54,0,0,0-14.71.2A2.74,2.74,0,0,0,.73,58l21,22.81C30.19,90.19,38.76,94,51.34,94a25.13,25.13,0,0,0,25-25.23V18.06A5.08,5.08,0,0,0,71.25,12.76Z" />
                    </g>
                </g>
            </svg></button>
        <button class="button" id="Scissors">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.1 95" class="svg">
                <defs>
                    <style>
                        .cls-3 {
                            fill: #7F9183;
                        }
                    </style>
                </defs>
                <title>Scissors</title>
                <g id="Layer_2" data-name="Layer 2">
                    <g id="Layer_1-2" data-name="Layer 1">
                        <path class="cls-3 svg"
                            d="M19.41,52.38H29.75V41A8.35,8.35,0,0,1,32.37,35l4-28.17A5.87,5.87,0,1,0,24.71,5.16L19.23,42.8a1,1,0,0,1-2.05,0L11.68,5.06A5.87,5.87,0,1,0,.06,6.69C1.58,18,2.73,26.1,3.56,32,5.69,47,6.05,49.5,6.11,60.07A15.38,15.38,0,0,1,19.41,52.38Z" />
                        <path class="cls-3 svg"
                            d="M52.8,65a8.35,8.35,0,0,1-7-3.76A11.59,11.59,0,0,1,35,68.77H30.83A13.26,13.26,0,0,1,37,80v3.62a1,1,0,1,1-2.06,0V80A11.23,11.23,0,0,0,23.73,68.77a1,1,0,0,1-1-1h0a1,1,0,0,1,1-1H35a9.45,9.45,0,0,0,6.14-2.26,9.61,9.61,0,0,0,2.11-2.55,9.38,9.38,0,0,0,1.24-4.47c0-.07,0-.14,0-.21a2,2,0,0,0,0-.43.34.34,0,0,0,0-.1,2.75,2.75,0,0,0-2.7-2.23H19.41A13.3,13.3,0,0,0,6.13,67.74h0a27.13,27.13,0,0,0,8.38,20.12,26.57,26.57,0,0,0,19.87,7.08C48.24,94.05,59.1,82,59.1,67.57V62.12A8.34,8.34,0,0,1,52.8,65Z" />
                        <path class="cls-3 svg"
                            d="M52.8,41.36a6.31,6.31,0,0,0-6.3,6.31v8.88a4.65,4.65,0,0,1,0,.66s0,.1,0,.16a6.3,6.3,0,0,0,12.56-.74v-9A6.31,6.31,0,0,0,52.8,41.36Z" />
                        <path class="cls-3 svg"
                            d="M36.08,35.08l-.27.1-.27.11-.27.14-.24.12-.29.18-.2.13-.3.22-.16.13A6.29,6.29,0,0,0,31.82,41V52.38h9.9a4.87,4.87,0,0,1,2.71.83V47.67h0V41a6.31,6.31,0,0,0-5.66-6.27c-.22,0-.43,0-.65,0s-.4,0-.6,0l-.24,0-.34.05-.28.06-.29.08Z" />
                    </g>
                </g>
            </svg>
        </button>
    </div>
    <hr>
    <div>
        <p id="result">It's your turn!</p>
    </div>
    <hr>
    <p id="score">You: 0 Computer : 0</p>
    <p id="final-result"> </p>
    <button id="reset">Reset</button>
</body>

<script>

    let playerScore = 0
    let computerScore = 0
    const max_rounds = 5
    let finishedRound = 0
    let draw = 0
    let realRounds = 0

    const reset = document.querySelector("#reset")
    reset.style.display = "none";

    /**
     * Tis function randomly generates either Rock Paper or Scissors
     */
    function computerPlay() {
        let num = Math.floor(Math.random() * 3)
        if (num == 0) {
            return "Rock"
        }
        else if (num == 1) {
            return "Paper"
        }
        else {
            return "Scissors"
        }
    }

    /**
     *  Takes a string input and converts its first character to uppercase and the other ones to lower.
     */
    function fistUpper(str) {
        return (str.charAt(0).toUpperCase() + str.substr(1).toLowerCase())
    }

    /**
     *  Creates the string for the final result, and displays it.
     *  It disables all the buttons in the game and enadles a "reset" button.
     */
    function finalResult() {
        //The latter part of the final message
        let score = "Your Socre\n" + "Win: " + playerScore + "    Lose: " + (computerScore) + "    Draw: " + draw + "    Rounds: " + (finishedRound + draw)
        let finalScore;
        let final = document.querySelector("#final-result");

        if (playerScore > computerScore) {
            finalScore = "You Win!\n\n" + score;
        }
        else if (playerScore < computerScore) {
            finalScore = "You Lost!\n\n" + score;
        }
        else {
            finalScore = "It's a Draw!\n\n" + score;
        }
        final.textContent = finalScore;
        const buttons = document.querySelectorAll(".button");
        buttons.forEach(btn => {
            btn.disabled = true;
        });
        reset.style.display = "block";
    }

    /**
     *  Resets the game including scores and rounds, reenables the game buttons,
     *  and calls the displayResult to delete the previous score from the scren.
     */
    function resetGame() {
        const buttons = document.querySelectorAll(".button");
        buttons.forEach(btn => {
            btn.disabled = false;
        });
        const text = document.querySelector("#result");
        reset.style.display = "none";
        playerScore = 0;
        computerScore = 0;
        finishedRound = 0;
        draw = 0;
        realRounds = 0;
        displayResult();
        text.textContent = "It's your turn!";
    }

    /**
     *  Plays a round, takes two inputs the players and the computers choice.
     *  It returns the result in string which -> includes "You Win" if you win,
     *  and includes "You Lose" if you lose.
     */
    function playRound(playerSelection, computerSelection) {
        player = fistUpper(playerSelection)
        if (player == computerSelection) {
            return "It's a draw! You both chose" + " " + player
        }
        else if (player == "Rock" && computerSelection == "Scissors") {
            return "You Win! Rock beats Scissors"
        }
        else if (player == "Rock" && computerSelection == "Paper") {
            return "You Lose! Paper beats Rock"
        }
        else if (player == "Paper" && computerSelection == "Scissors") {
            return "You Lose! Scissors beats Paper"
        }
        else if (player == "Paper" && computerSelection == "Rock") {
            return "You Win! Paper beats Rock"
        }
        else if (player == "Scissors" && computerSelection == "Rock") {
            return "You Lose! Rock beats Scissors"
        }
        else if (player == "Scissors" && computerSelection == "Paper") {
            return "You Win! Scissors beats Paper"
        }
        else {
            return "Your input is not correct.. Try \"Rock\" \"Paper\" or \"Scissors\""
        }
    }

    /**
     *  This displays the final score if the game has finished (finishedRounds >= max rounds),
     *  Else, this displays nothing in the final-results row.
     */
    function displayResult() {
        const res = document.querySelector("#result");
        const socre = document.querySelector("#score");
        const final = document.querySelector("#final-result")

        res.textContent = result;
        score.textContent = `You : ${playerScore}      Computer : ${computerScore}`;

        if (finishedRound >= max_rounds) {
            finalResult();
        }
        else {
            final.textContent = "";
        }
    }

    /**
     *  Plays a game, and displays the result
     */
    function game(playerSelection, computerSelection) {
        //playerSelection = prompt("It's your turn! Rock Paper or Scissors?")
        result = playRound(playerSelection, computerSelection)
        if (result.includes("You Win")) {
            playerScore++
            finishedRound++
        }
        else if (result.includes("You Lose")) {
            computerScore++
            finishedRound++
        }
        else {
            draw++
        }
        displayResult();
    }

    const buttons = document.querySelectorAll(".button");
    buttons.forEach(element => {
        element.addEventListener("click", () =>
            game(element.id, computerPlay())
        );
    });

    reset.addEventListener("click", () => resetGame());

</script>